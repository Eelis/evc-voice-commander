stopped:
    <screen>: focus $0

system:
    restart/shutdown/print <word>: builtin $*

computer:
    global-mode: True
    short-name: comp

    mode <mode>/print <word>/press <keys>: builtin $*
    <mode>: mode $0
    <screen>: focus $0  computer
    sleep <number>: builtin execute "$*"
    new browser: builtin run firefox  web
    new terminal: builtin run urxvt  mode terminal
    door: builtin run cctv
    calendar: builtin run "urxvt -e zsh -c 'cal; sleep 1000'"  focus
    live jobs: builtin run "urxvt -e zsh -c top"  focus
    job tree: builtin run "urxvt -e zsh -c 'ps fax|less'"  focus

focus:
    global-mode: True

    press <keys>: builtin $*
    <mode>: builtin mode $0
    change <target>: mark  $1  attach # 'move' would be better but is poorly recognized by kaldi
    mark: press wmkey+d
    attach: press wmkey+a
    close: press wmkey+c
    kill: press wmkey+c
    <screen>: press wmkey+y,$enumindex0
    <direction>: press wmkey+$0
    next: press wmkey+tab
    previous: press wmkey+shift+tab
    next work space: press wmkey+pagedown
    previous work space: press wmkey+pageup
    new work space: press wmkey+w
    split <direction>: press wmkey+s,$1
    join: press wmkey+v
    go 2 frame <number>: press wmkey+j,$3
    change 2 frame <number>: mark go 2 frame $3 attach

# specific applications:

mail:
    auto-enable-for-applications: thunderbird

    home|delete|escape|up|down: builtin press $0
    next: builtin press f
    select <number>: keydown shift  press $1*down,up  keyup shift
    <number> <direction>: builtin press $0*$1

web-navigate:
    <number>: builtin text $0  builtin mode web
    go: builtin press enter

less:
    auto-enable-for-applications: less

    press <keys>: builtin $*
    finish: press q
    find: press slash

web:
    auto-enable-for-applications: firefox-bin

    press <keys>/text <word>: builtin $*
    home|escape|delete|<direction>|space: builtin press $0
    erase: press shift+home,delete
    small: press ctrl+0
    bigger: press ctrl+0,6*ctrl+shift+=
    finish: press ctrl+w
    find <word>: press ctrl+f  text $1
    back: press backspace
    location: press f6
    go: press escape,f  builtin mode web-navigate
    refresh: press f5
    fresh: press f5
    forward: todo
    copy: press ctrl+c
    paste: press ctrl+v
    start of page: press home
    end of page: press end
    page up|down: press page$1
    <number> pages up|down: press $0*page$2
    fresh: press ctrl+t
    previous: builtin press ctrl+pageup
    next: builtin press ctrl+pagedown

edit-find:
    slash|backspace: builtin press $0
    go: builtin press enter  builtin mode edit
    escape: builtin press escape  builtin mode edit
    cancel: escape
    edit: escape
    delete word: builtin press ctrl+w

edit-insert:
    slash|space|semicolon|backspace|period|dollar|percent: builtin press $0
    escape: builtin press escape  builtin mode edit
        # text is not in edit itself because in view mode, entering a textual word makes no sense
    text <word>: builtin $*

edit:
    auto-enable-for-applications: vim

    press <keys>: builtin $*
    escape|delete|enter|<direction>: builtin press $0
    undo: press escape,u
    redo: press escape,ctrl+r
    save: press ctrl+s
    find: press escape,slash  builtin mode edit-find
    <number> <direction>: builtin press $0*$1
    copy <number>: select $1  press ctrl+c
    paste <number>: go $1  press ctrl+v
    select <number>: escape  press shift+v  text $1  press shift+g
    start of file: press escape,g,g
    end of file: press escape,shift+g
    start of line: press home
    end of line: press end
    go <number>: escape  builtin text $1  press shift+g
    next buffer: escape  press ctrl+end
    previous buffer: escape  press ctrl+home
    next match: escape  press n
    previous match: escape  press shift+n
    finish: escape  builtin keydown shift  builtin text zz  builtin keyup shift
    refresh: press ctrl+l
    insert: press insert  builtin mode edit-insert

vlc:
    auto-enable-for-applications: vlc

    maximize: press f
    kill: press wmkey+c
    mark: press wmkey+d  focus
    change <target>: focus change $1

shell:
    auto-enable-for-leaf-applications: zsh

    text <word>/press <keys>: builtin $*
    do it: press enter
    again: press up,enter
    page up|down: press shift+page$1
    finish: press ctrl+d
    change directory <word>: text "cd $2" press enter
    directory up: text "cd .." press enter
    directory back: text "cd -" press enter
    revisions: text "gitk" press enter
    history: text history  press enter
    execute <number>: text !$1
    delete word: builtin press ctrl+w
    <direction>|space: builtin press $0
    erase: press ctrl+u

terminal:
    auto-enable-for-applications: urxvt
    short-name: term

    press <keys>: builtin $*

gitk:
    auto-enable-for-suffixes: ['- gitk']

    <direction>: builtin press $0
    <number> <direction>: press $0*$1
    change <target>: focus change $1
    kill: builtin press ctrl+q
    finish: kill
